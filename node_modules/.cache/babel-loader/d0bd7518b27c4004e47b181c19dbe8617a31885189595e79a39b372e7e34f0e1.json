{"ast":null,"code":"var _jsxFileName = \"/Users/jackolsen/Desktop/JavaScript/graph-test/src/Components/ProfessorGraph.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfessorGraph = ({\n  data,\n  setData\n}) => {\n  _s();\n  const svgRef = useRef();\n  const navigate = useNavigate === null || useNavigate === void 0 ? void 0 : useNavigate();\n  useEffect(() => {\n    // Clear added professors but keep Professor Arti\n    const defaultGraphData = {\n      nodes: [{\n        id: \"Professor Arti\",\n        group: 0,\n        size: 75\n      }],\n      links: []\n    };\n    if (!localStorage.getItem(\"graphData\")) {\n      localStorage.setItem(\"graphData\", JSON.stringify(defaultGraphData));\n    }\n    localStorage.setItem(\"graphData\", JSON.stringify(data));\n  }, [data]);\n  useEffect(() => {\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n    const links = data.links.map(d => ({\n      ...d\n    }));\n    const nodes = data.nodes.map(d => ({\n      ...d\n    }));\n    d3.select(svgRef.current).selectAll(\"*\").remove(); // Clear previous SVG elements\n\n    const svg = d3.select(svgRef.current).attr(\"width\", width).attr(\"height\", height).attr(\"viewBox\", [0, 0, width, height]).style(\"max-width\", \"100%\").style(\"height\", \"100vh\");\n    const simulation = d3.forceSimulation(nodes).force(\"link\", d3.forceLink(links).id(d => d.id).distance(300)).force(\"charge\", d3.forceManyBody().strength(-300)).force(\"center\", d3.forceCenter(width / 2, height / 2)).on(\"tick\", ticked);\n    const link = svg.append(\"g\").attr(\"stroke\", \"#999\").attr(\"stroke-opacity\", 0.6).selectAll(\"line\").data(links).join(\"line\").attr(\"stroke-width\", d => Math.sqrt(d.value));\n    const node = svg.append(\"g\").attr(\"stroke\", \"#fff\").attr(\"stroke-width\", 1.5).selectAll(\"circle\").data(nodes).join(\"circle\").attr(\"r\", d => d.size || 5).attr(\"fill\", d => color(d.group)).call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended)).on(\"click\", (event, d) => handleNodeClick(d)).on(\"mouseover\", function (event, d) {\n      d3.select(this).transition().duration(200).attr(\"r\", d.size * 1.5);\n      labels.filter(label => label.id === d.id).attr(\"dy\", d.size * 1.5 + 27); // Move text inline with node\n    }).on(\"mouseout\", function (event, d) {\n      d3.select(this).transition().duration(200).attr(\"r\", d.size);\n      labels.filter(label => label.id === d.id).attr(\"dy\", d.size + 27); // Reset text position\n    });\n    const labels = svg.append(\"g\").selectAll(\"text\").data(nodes).join(\"text\").attr(\"text-anchor\", \"middle\").attr(\"dy\", d => d.size + 30) // Position the label below the node\n    .style(\"font-size\", \"32px\").style(\"font-weight\", \"bold\").style(\"fill\", \"black\").text(d => d.id);\n    function ticked() {\n      link.attr(\"x1\", d => d.source.x).attr(\"y1\", d => d.source.y).attr(\"x2\", d => d.target.x).attr(\"y2\", d => d.target.y);\n      node.attr(\"cx\", d => d.x).attr(\"cy\", d => d.y);\n      labels.attr(\"x\", d => d.x).attr(\"y\", d => d.y);\n    }\n    function handleNodeClick(d) {\n      if (navigate && d.group === 1) {\n        // Ensure it's a professor node and navigation is available\n        navigate(`/chatbot/${encodeURIComponent(d.id)}`);\n      }\n    }\n    function dragstarted(event) {\n      if (!event.active) simulation.alphaTarget(0.3).restart();\n      event.subject.fx = event.subject.x;\n      event.subject.fy = event.subject.y;\n    }\n    function dragged(event) {\n      event.subject.fx = event.x;\n      event.subject.fy = event.y;\n    }\n    function dragended(event) {\n      if (!event.active) simulation.alphaTarget(0);\n      event.subject.fx = null;\n      event.subject.fy = null;\n    }\n    return () => simulation.stop();\n  }, [data, navigate]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: svgRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 12\n  }, this);\n};\n_s(ProfessorGraph, \"xZvsc6Dl8WHAXhRrVyhrxei3QC0=\");\n_c = ProfessorGraph;\nexport default ProfessorGraph;\nvar _c;\n$RefreshReg$(_c, \"ProfessorGraph\");","map":{"version":3,"names":["useEffect","useRef","useNavigate","d3","jsxDEV","_jsxDEV","ProfessorGraph","data","setData","_s","svgRef","navigate","defaultGraphData","nodes","id","group","size","links","localStorage","getItem","setItem","JSON","stringify","width","window","innerWidth","height","innerHeight","color","scaleOrdinal","schemeCategory10","map","d","select","current","selectAll","remove","svg","attr","style","simulation","forceSimulation","force","forceLink","distance","forceManyBody","strength","forceCenter","on","ticked","link","append","join","Math","sqrt","value","node","call","drag","dragstarted","dragged","dragended","event","handleNodeClick","transition","duration","labels","filter","label","text","source","x","y","target","encodeURIComponent","active","alphaTarget","restart","subject","fx","fy","stop","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jackolsen/Desktop/JavaScript/graph-test/src/Components/ProfessorGraph.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as d3 from \"d3\";\n\nconst ProfessorGraph = ({ data, setData }) => {\n\n    const svgRef = useRef();\n    const navigate = useNavigate?.();\n\n    useEffect(() => {\n        // Clear added professors but keep Professor Arti\n        const defaultGraphData = {\n            nodes: [{ id: \"Professor Arti\", group: 0, size: 75 }],\n            links: []\n        };\n\n        if (!localStorage.getItem(\"graphData\")) {\n            localStorage.setItem(\"graphData\", JSON.stringify(defaultGraphData));\n        }\n\n        localStorage.setItem(\"graphData\", JSON.stringify(data));\n    }, [data]);\n\n    useEffect(() => {\n        const width = window.innerWidth;\n        const height = window.innerHeight;\n        const color = d3.scaleOrdinal(d3.schemeCategory10);\n\n        const links = data.links.map(d => ({ ...d }));\n        const nodes = data.nodes.map(d => ({ ...d }));\n\n        d3.select(svgRef.current).selectAll(\"*\").remove(); // Clear previous SVG elements\n\n        const svg = d3.select(svgRef.current)\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .attr(\"viewBox\", [0, 0, width, height])\n            .style(\"max-width\", \"100%\")\n            .style(\"height\", \"100vh\");\n\n        const simulation = d3.forceSimulation(nodes)\n            .force(\"link\", d3.forceLink(links).id(d => d.id).distance(300))\n            .force(\"charge\", d3.forceManyBody().strength(-300))\n            .force(\"center\", d3.forceCenter(width / 2, height / 2))\n            .on(\"tick\", ticked);\n\n        const link = svg.append(\"g\")\n            .attr(\"stroke\", \"#999\")\n            .attr(\"stroke-opacity\", 0.6)\n            .selectAll(\"line\")\n            .data(links)\n            .join(\"line\")\n            .attr(\"stroke-width\", d => Math.sqrt(d.value));\n\n        const node = svg.append(\"g\")\n            .attr(\"stroke\", \"#fff\")\n            .attr(\"stroke-width\", 1.5)\n            .selectAll(\"circle\")\n            .data(nodes)\n            .join(\"circle\")\n            .attr(\"r\", d => d.size || 5)\n            .attr(\"fill\", d => color(d.group))\n            .call(d3.drag()\n                .on(\"start\", dragstarted)\n                .on(\"drag\", dragged)\n                .on(\"end\", dragended))\n            .on(\"click\", (event, d) => handleNodeClick(d))\n            .on(\"mouseover\", function (event, d) {\n                d3.select(this).transition().duration(200).attr(\"r\", d.size * 1.5);\n                labels.filter(label => label.id === d.id).attr(\"dy\", d.size * 1.5 + 27); // Move text inline with node\n            })\n            .on(\"mouseout\", function (event, d) {\n                d3.select(this).transition().duration(200).attr(\"r\", d.size);\n                labels.filter(label => label.id === d.id).attr(\"dy\", d.size + 27); // Reset text position\n            });\n\n        const labels = svg.append(\"g\")\n            .selectAll(\"text\")\n            .data(nodes)\n            .join(\"text\")\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dy\", d => d.size + 30) // Position the label below the node\n            .style(\"font-size\", \"32px\")\n            .style(\"font-weight\", \"bold\")\n            .style(\"fill\", \"black\")\n            .text(d => d.id);\n\n        function ticked() {\n            link.attr(\"x1\", d => d.source.x)\n                .attr(\"y1\", d => d.source.y)\n                .attr(\"x2\", d => d.target.x)\n                .attr(\"y2\", d => d.target.y);\n\n            node.attr(\"cx\", d => d.x)\n                .attr(\"cy\", d => d.y);\n\n            labels.attr(\"x\", d => d.x)\n                .attr(\"y\", d => d.y);\n        }\n\n        function handleNodeClick(d) {\n            if (navigate && d.group === 1) { // Ensure it's a professor node and navigation is available\n                navigate(`/chatbot/${encodeURIComponent(d.id)}`);\n            }\n        }\n\n\n        function dragstarted(event) {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            event.subject.fx = event.subject.x;\n            event.subject.fy = event.subject.y;\n        }\n\n        function dragged(event) {\n            event.subject.fx = event.x;\n            event.subject.fy = event.y;\n        }\n\n        function dragended(event) {\n            if (!event.active) simulation.alphaTarget(0);\n            event.subject.fx = null;\n            event.subject.fy = null;\n        }\n\n        return () => simulation.stop();\n    }, [data, navigate]);\n\n    return <svg ref={svgRef}></svg>;\n};\n\nexport default ProfessorGraph;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}